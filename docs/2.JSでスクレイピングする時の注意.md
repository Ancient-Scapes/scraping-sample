# JSでスクレイピングする時の注意

## 画面側のjsでaxiosを使って外部ページをスクレイピングすることはできない

### CORS(Cross-Origin-Resource Sharing)がある

同一オリジンポリシーというものがある

通常はセキュリティ上の理由によって自分のオリジン上以外の場所からデータを取ってくるのは禁止されてるよ

公式MDNとQiitaに詳しい説明が転がってる

ググれば俺より詳しい説明がいくらでもある


### オリジンとは？

- スキーム:`https://`
- ホスト:`www.gigazine.net`
- ポスト:`80`
  
これの組み合わせ、同じドメインと考えていればわかりやすい

## これの解決方法


### バックエンド側にAPIを持たせて、それを画面側から叩くことで解決できる

- PHPで`curl`を使う
- Firebaseの`Cloud Functions`でNode.jsを使って`axios`なり`puppeteer`なりを使う
- `AWS Lambda`を使う

2番目がおすすめ
npmモジュールに`cors`というライブラリがあり、それを使うことで別ドメインで叩いても結果を取得できる


## まとめ

- 画面側のJSからスクレイピング結果を使いたい場合は、バックエンドで書こう
- 基本別ドメインにアクセスできないことを覚えておこう
- サーバーレスアーキテクチャはクソ楽